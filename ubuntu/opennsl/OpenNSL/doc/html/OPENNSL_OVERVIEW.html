<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>OpenNSL API Guide and Reference Manual: Software Overview</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen_brcm.css" rel="stylesheet" type="text/css" />
<link href="tabs_brcm.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">OpenNSL API Guide and Reference Manual
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.2 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Welcome</span></a></li>
      <li class="current"><a href="pages.html"><span>OpenNSL&#160;Documentation</span></a></li>
      <li><a href="modules.html"><span>API&#160;Reference</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Software Overview </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Open Network Switch Layer (OpenNSL) is a library of network switch APIs that is openly available for programming Broadcom network switch silicon based platforms. These open APIs enable development of networking application software based on Broadcom network switch architecture based platforms. Because of the wide variety of switch devices the OpenNSL APIs run on, not all functions are available on all underlying devices. The API exports silicon features in an independent manner as much as possible, but does not implement in software those functions that the underlying devices do not support.</p>
<p>From the OpenNSL point of view, the system is a collection of interconnected devices, each controlling ports. Operations are carried out on a particular device and ports on that device are often specified as a bitmap. After devices, the most important object is the port. This is illustrated by the fact that the OpenNSL Port API is the largest set of functions by far. The OpenNSL API uses small integers to refer to ports. These are generally the physical port numbers on the device. Thus, it is necessary to know the particulars of the device being updated to address the ports on that device.</p>
<p>OpenNSL software contains the files needed for development of switch applications: C header files, libraries and documentation.</p>
<h1><a class="anchor" id="OPENNSL_LAYER"></a>
Software Architecture</h1>
<p>This section describes fundamental concepts needed for understanding the OpenNSL API calls. It describes the basic types and function calls for manipulating those types. Figure 1 is a block diagram representation of the various components of OpenNSL.</p>
<div class="image">
<img src="OpenNSLComponentLayers.jpg" alt="OpenNSLComponentLayers.jpg"/>
<div class="caption">
Figure 1</div></div>
<p> The following is a list of fundamental aspects of switching which are all managed by the OpenNSL API.</p>
<ul>
<li><b>Error Codes</b>: With few exceptions, all OpenNSL routines return an integer indicating the success or error status of the call. All error codes (except OPENNSL_E_NONE) are negative.</li>
</ul>
<ul>
<li><b>Initialization</b>: The OpenNSL API provide the functions to attach the device and then to initialize the software resources necessary to control the device and to initialize the device itself. The order of these operations is critical.</li>
</ul>
<ul>
<li><b>KNET</b>: The Kernel Network (KNET) module provides a software connector that forwards packets to and from the native network interfaces of the operating system. The KNET module maps the packet streams from the network interfaces to OpenNSL transmit APIs. Similarly, the incoming packets from OpenNSL receive callback are mapped in to the network interfaces.</li>
</ul>
<ul>
<li><b>Layer 2</b>: Switch devices in the system generally inspect the Layer 2 header of a packet, possibly learn the source address and switch the packet based on the destination address. Managing the Layer 2 forwarding data base is an important part of the software.</li>
</ul>
<ul>
<li><b>Layer 3</b>: Some devices support examining deeper into the packet to determine the Layer 3 characteristics of the packet, updating the packet and forwarding the packet based on this information. Typically, software is responsible for the learning of Layer 3 routes, but there-after, hardware may be able to forward these packets without software intervention.</li>
</ul>
<ul>
<li><b>Link Monitor</b>: The OpenNSL API provides a mechanism to scan the ports, monitoring for link-up and link-down events. This is accomplished using a thread to constantly monitor the PHYs for link status, and then calling user-supplied callbacks.</li>
</ul>
<ul>
<li><b>Packet transmit and receive</b>: The OpenNSL packet transmit and receive APIs provides the ability to receive packets captured from data plane and to send packets to the data plane from the host CPU. Typical uses for these functions are to implement various networking control protocols or "slow path" session handling.</li>
</ul>
<ul>
<li><b>Port Configuration</b>: The port configuration API's provide control over a significant number of port attributes. The port attributes are typically controlled by using set or get API's.</li>
</ul>
<ul>
<li><b>Statistics</b>: The Statistics module allows for retrieval of common SNMP statistics for use with switch management and diagnostics software. Both 64-bit and 32-bit counters are supported. The statistics API uses an enumerated type indicating the type of statistics to retrieve.</li>
</ul>
<ul>
<li><b>STG</b>: Spanning tree groups are groups of VLANs. A port has a forwarding state for each spanning tree group and this is the state used for each VLAN in that group.</li>
</ul>
<ul>
<li><b>Switch Control</b> : Some operating modes within switching devices can be set a few ways, but are usually not changed after device initialization. These often are properties that do not fit well into other parts of the OpenNSL APIs. They have been collected into one set of control APIs.</li>
</ul>
<ul>
<li><b>Trunk</b>: Trunking, or link aggregation, is a mechanism that allows several ports to be bundled together to form a single logical group. This is useful when higher bandwidth or redundancy between switches, or both, are required.</li>
</ul>
<ul>
<li><b>VLAN</b>: A virtual network to which ports may belong. Ports may maintain state which is VLAN specific. A port may belong to multiple VLANs. </li>
</ul>
</div></div><!-- contents -->
<!-- HTML footer for doxygen 1.8.5-->
<!-- start footer part -->
<!--BEGIN GENERATE_TREEVIEW -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
<hr>
<p>	
<table class="footer-brcm">
	<tr>
		<td class="footer-brcm"><img src="BRCM_Red+Black_noTag_RGB.png" align=left></td>
		<td class="footer-brcm"><small><b>&copy;  2016 by Broadcom Corporation. All rights reserved.</b></small>
			<div class="footer-brcm"><small>Broadcom Corporation reserves the right to make changes without further notice to any products or data herein to improve reliability, function, or design. 
Information furnished by Broadcom Corporation is believed to be accurate and reliable. However, Broadcom Corporation does not assume any liability arising 
out of the application or use of this information, nor the application or use of any product or circuit described herein, neither does it convey any license 
under its patent rights nor the rights of others. </small>
			</div>
		</td>
	</tr>
</table>	
</p>	
</div>
<!--END GENERATE_TREEVIEW-->
</body>
</html>
